extends layout

mixin link(href, name)
  a(class!=attributes.class href=href)= name

block content
    h1= title
    p
        +link('new_loan', 'Create New Loan')(class='button')
    p Filters&nbsp;
        +link('/loans', 'All')
        .
            &nbsp;|&nbsp;
        +link('/loans/overdue_loans', 'Overdue')
        .
            &nbsp;|&nbsp;
        +link('/loans/checked_loans', 'Checked Out')
    table
        thead
            tr
                each val in ['Book', 'Patron', 'Loaned on', 'Return by', 'Returned on', 'Action']
                    th= val
        tbody
            each loan in loans
                tr
                    td
                        +link('book_detail', loan.Book.title)
                    td
                        +link('patron_detail', loan.Patron.first_name + " " + loan.Patron.last_name)
                    each val in [loan.loaned_on, loan.return_by, loan.returned_on]
                        td=val
                    td
                        unless loan.returned_on
                            +link('return_book', 'Return Book')(class='button')